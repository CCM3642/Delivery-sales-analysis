<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crispy Chicken Analytics Dashboard</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- SheetJS for Excel Import -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- jsPDF for PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- LZ-String for Compression -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
    
    <style>
        :root {
            --primary-color: #ff6b35;
            --secondary-color: #f7931e;
            --dark-color: #212529;
            --light-color: #f8f9fa;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
        }
        
        .navbar {
            background-color: var(--primary-color) !important;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .nav-tabs .nav-link {
            color: var(--dark-color);
            border: none;
            border-bottom: 3px solid transparent;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            background-color: transparent;
        }
        
        .nav-tabs .nav-link:hover {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .metric-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .metric-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 2rem;
        }
        
        .table-responsive {
            border-radius: 10px;
            overflow: hidden;
        }
        
        .table thead th {
            background-color: var(--primary-color);
            color: white;
            border: none;
            white-space: nowrap;
        }
        
        .table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(255, 107, 53, 0.25);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 300px;
            max-width: 350px;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .spinner-border {
            width: 3rem;
            height: 3rem;
            border-width: 0.3em;
        }
        
        .tab-content {
            padding: 1.5rem 0;
        }
        
        .branch-badge {
            background-color: var(--secondary-color);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .offer-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .offer-normal {
            background-color: var(--success-color);
            color: white;
        }
        
        .offer-chicken {
            background-color: var(--warning-color);
            color: darkslategray;
        }
        
        .offer-ultimate {
            background-color: var(--danger-color);
            color: white;
        }
        
        .page-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .page-header h1 {
            color: var(--dark-color);
            font-weight: 600;
        }
        
        .page-header .breadcrumb {
            margin-bottom: 0;
            padding: 0;
            background-color: transparent;
        }
        
        .page-header .breadcrumb-item a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .page-header .breadcrumb-item.active {
            color: var(--dark-color);
        }
        
        .save-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .save-saved {
            background-color: var(--success-color);
            color: white;
        }
        
        .save-unsaved {
            background-color: var(--warning-color);
            color: darkslategray;
        }
        
        .save-saving {
            background-color: var(--primary-color);
            color: white;
        }
        
        .data-management-card {
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 5px;
        }
        
        .auto-save-toggle {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .auto-save-toggle .form-check-input {
            margin-right: 0.5rem;
        }
        
        .data-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding: 0.75rem;
            background-color: #e9ecef;
            border-radius: 5px;
        }
        
        .data-stats .stat-item {
            text-align: center;
        }
        
        .data-stats .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .data-stats .stat-label {
            font-size: 0.85rem;
            color: #6c757d;
        }
        
        .last-saved {
            font-size: 0.85rem;
            color: #6c757d;
            margin-bottom: 1rem;
        }
        
        .file-drop-area {
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 1rem;
        }
        
        .file-drop-area:hover {
            border-color: var(--primary-color);
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .file-drop-area.drag-over {
            border-color: var(--primary-color);
            background-color: rgba(255, 107, 53, 0.1);
        }
        
        .progress {
            height: 5px;
            margin-bottom: 1rem;
        }
        
        .modal-header {
            background-color: var(--primary-color);
            color: white;
        }
        
        .modal-header .btn-close {
            filter: brightness(0) invert(1);
        }
        
        .excel-format-info {
            background-color: #e7f3ff;
            border-left: 4px solid var(--info-color);
            padding: 0.75rem 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
        
        .feedback-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--info-color);
        }
        
        .feedback-card h6 {
            color: var(--dark-color);
            margin-bottom: 0.5rem;
        }
        
        .feedback-card p {
            margin-bottom: 0.5rem;
            color: #6c757d;
        }
        
        .feedback-card .feedback-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: #6c757d;
        }
        
        .rating-input {
            display: flex;
            gap: 5px;
            font-size: 1.5rem;
            margin: 0.5rem 0;
        }
        
        .rating-input i {
            cursor: pointer;
            color: #ddd;
            transition: color 0.2s;
        }
        
        .rating-input i.active {
            color: #ffc107;
        }
        
        .feedback-category {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .category-service {
            background-color: var(--info-color);
            color: white;
        }
        
        .category-food {
            background-color: var(--primary-color);
            color: white;
        }
        
        .category-cleanliness {
            background-color: var(--success-color);
            color: white;
        }
        
        .category-other {
            background-color: var(--warning-color);
            color: darkslategray;
        }
        
        .target-plan-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .target-progress {
            height: 30px;
            border-radius: 15px;
            background-color: rgba(255, 255, 255, 0.2);
            overflow: hidden;
            margin-bottom: 0.5rem;
        }
        
        .target-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            border-radius: 15px;
            transition: width 0.6s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .target-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .target-metric:last-child {
            border-bottom: none;
        }
        
        .target-metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .target-metric-value {
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .branch-target-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .branch-target-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }
        
        .branch-target-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .branch-target-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .branch-target-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .target-achieved {
            background-color: var(--success-color);
            color: white;
        }
        
        .target-pending {
            background-color: var(--warning-color);
            color: darkslategray;
        }
        
        .target-critical {
            background-color: var(--danger-color);
            color: white;
        }
        
        .target-summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .target-summary-item {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
        }
        
        .target-summary-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .target-summary-label {
            font-size: 0.9rem;
            color: var(--dark-color);
        }
        
        .target-allocation-chart {
            height: 350px;
            margin-bottom: 2rem;
        }
        
        .target-timeline {
            position: relative;
            padding: 2rem 0;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .timeline-date {
            min-width: 100px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .timeline-content {
            flex: 1;
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-left: 1rem;
        }
        
        .target-action-btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .target-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .target-input-group {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .target-input-group label {
            min-width: 150px;
            font-weight: 500;
            margin-right: 1rem;
        }
        
        .target-input-group input {
            flex: 1;
        }
        
        .target-percentage-display {
            background: #e9ecef;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-weight: 600;
            color: var(--primary-color);
            min-width: 80px;
            text-align: center;
            margin-left: 1rem;
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
            
            .metric-value {
                font-size: 1.5rem;
            }
            
            .notification {
                left: 10px;
                right: 10px;
                min-width: auto;
                max-width: none;
            }
            
            .data-stats {
                flex-wrap: wrap;
            }
            
            .data-stats .stat-item {
                flex: 1 1 50%;
                margin-bottom: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"><i class="fas fa-drumstick-bite"></i> Crispy Chicken Analytics</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-page="dashboard"><i class="fas fa-chart-line"></i> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="data-entry"><i class="fas fa-plus-circle"></i> Data Entry</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="management-report"><i class="fas fa-file-alt"></i> Management Report</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="target-plan"><i class="fas fa-bullseye"></i> Target Plan</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="feedback-management"><i class="fas fa-comments"></i> Feedback Management</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-page="data-management"><i class="fas fa-database"></i> Data Management</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-4">
        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page-content">
            <div class="page-header">
                <h1>Sales Analytics Dashboard</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Dashboard</li>
                    </ol>
                </nav>
            </div>

            <!-- Date Range Selector -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <label for="dateRange" class="form-label">Date Range</label>
                            <div class="input-group">
                                <input type="date" id="startDate" class="form-control" value="2025-10-01" aria-label="Start date">
                                <span class="input-group-text">to</span>
                                <input type="date" id="endDate" class="form-control" value="2025-10-14" aria-label="End date">
                                <button class="btn btn-primary" onclick="app.dashboard.updateDashboard()" aria-label="Update dashboard">
                                    <i class="fas fa-sync"></i> Update
                                </button>
                            </div>
                            <div class="form-text">Select the date range for analysis</div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Quick Select</label>
                            <div class="btn-group w-100" role="group">
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="app.dashboard.setDateRange('today')">
                                    <i class="fas fa-calendar-day"></i> Today
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="app.dashboard.setDateRange('yesterday')">
                                    <i class="fas fa-calendar-minus"></i> Yesterday
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="app.dashboard.setDateRange('last7days')">
                                    <i class="fas fa-calendar-week"></i> Last 7 Days
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="app.dashboard.setDateRange('last30days')">
                                    <i class="fas fa-calendar-alt"></i> Last 30 Days
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="app.dashboard.setDateRange('thismonth')">
                                    <i class="fas fa-calendar"></i> This Month
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="app.dashboard.setDateRange('lastmonth')">
                                    <i class="fas fa-calendar-times"></i> Last Month
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <label class="form-label">Advanced Options</label>
                        <div class="row">
                            <div class="col-md-4">
                                <select class="form-select form-select-sm" id="branchFilter" onchange="app.dashboard.updateDashboard()" aria-label="Filter by branch">
                                    <option value="all">All Branches</option>
                                    <option value="Crispy Chicken-Hamdan St">Crispy Chicken-Hamdan St</option>
                                    <option value="Crispy Chicken Khaldia">Crispy Chicken Khaldia</option>
                                    <option value="Crispy Chicken Shabiya 11">Crispy Chicken Shabiya 11</option>
                                    <option value="Crispy Chicken Muroor">Crispy Chicken Muroor</option>
                                    <option value="Crispy Chicken Al Barsha">Crispy Chicken Al Barsha</option>
                                    <option value="Crispy Chicken Al Satwa">Crispy Chicken Al Satwa</option>
                                    <option value="Crispy Chicken Al Rgga">Crispy Chicken Al Rgga</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <select class="form-select form-select-sm" id="offerFilter" onchange="app.dashboard.updateDashboard()" aria-label="Filter by offer">
                                    <option value="all">All Offers</option>
                                    <option value="Normal Day">Normal Day</option>
                                    <option value="Chicken Day">Chicken Day</option>
                                    <option value="Ultimate">Ultimate</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="autoRefresh" checked>
                                    <label class="form-check-label" for="autoRefresh">
                                        Auto-refresh on date change
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Metrics -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="metric-card">
                        <div class="metric-value" id="totalSales">0</div>
                        <div class="metric-label">Total Sales (AED)</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card">
                        <div class="metric-value" id="totalTransactions">0</div>
                        <div class="metric-label">Total Transactions</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card">
                        <div class="metric-value" id="avgTransaction">0</div>
                        <div class="metric-label">Avg. Transaction (AED)</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card">
                        <div class="metric-value" id="targetAchievement">0%</div>
                        <div class="metric-label">Target Achievement</div>
                    </div>
                </div>
            </div>

            <!-- Tabs for different views -->
            <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab" aria-selected="true">Overview</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="performance-tab" data-bs-toggle="tab" data-bs-target="#performance" type="button" role="tab" aria-selected="false">Performance</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="trends-tab" data-bs-toggle="tab" data-bs-target="#trends" type="button" role="tab" aria-selected="false">Trends</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="insights-tab" data-bs-toggle="tab" data-bs-target="#insights" type="button" role="tab" aria-selected="false">Insights</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="recommendations-tab" data-bs-toggle="tab" data-bs-target="#recommendations" type="button" role="tab" aria-selected="false">Recommendations</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="offers-tab" data-bs-toggle="tab" data-bs-target="#offers" type="button" role="tab" aria-selected="false">Offers</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="feedback-analysis-tab" data-bs-toggle="tab" data-bs-target="#feedback-analysis" type="button" role="tab" aria-selected="false">Feedback Analysis</button>
                </li>
            </ul>

            <div class="tab-content" id="dashboardTabsContent">
                <!-- Overview Tab -->
                <div class="tab-pane fade show active" id="overview" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Sales & Transactions Trend</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="salesTrendChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Branch Sales Distribution</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="branchSalesChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Daily Sales Details</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" aria-label="Daily sales details table">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Branch</th>
                                                    <th>Channel</th>
                                                    <th>Transactions</th>
                                                    <th>Sales (AED)</th>
                                                    <th>Average per Order</th>
                                                    <th>Offer Type</th>
                                                    <th>Offer Status</th>
                                                </tr>
                                            </thead>
                                            <tbody id="dailySalesTable">
                                                <!-- Table content will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Tab -->
                <div class="tab-pane fade" id="performance" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Branch Performance Radar</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="branchPerformanceRadarChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Branch Performance Ranking</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="branchPerformanceRankingChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Performance Metrics</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <h3>Best Branch</h3>
                                                <div class="branch-badge" id="bestBranch">-</div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <h3>Highest Transactions</h3>
                                                <div class="branch-badge" id="highestTransactionsBranch">-</div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-center">
                                                <h3>Highest Avg. Sale</h3>
                                                <div class="branch-badge" id="highestAvgSaleBranch">-</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trends Tab -->
                <div class="tab-pane fade" id="trends" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Daily Trends</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="dailyTrendsChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Weekly Trends</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="weeklyTrendsChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Moving Average Analysis</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="movingAverageChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Insights Tab -->
                <div class="tab-pane fade" id="insights" role="tabpanel">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">AI Insights Analysis</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Anomaly Detection</h6>
                                    <div id="anomalyDetection">
                                        <div class="alert alert-warning">
                                            <i class="fas fa-exclamation-triangle"></i> 
                                            <strong>Anomaly Detection:</strong> 
                                            <p id="anomalyText">Analyzing data...</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6>Predictive Analytics</h6>
                                    <div id="predictiveAnalytics">
                                        <div class="alert alert-info">
                                            <i class="fas fa-chart-line"></i> 
                                            <strong>Sales Prediction:</strong> 
                                            <p id="predictionText">Generating prediction...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-md-12">
                                    <h6>Key Findings</h6>
                                    <div id="keyFindings">
                                        <ul class="list-group" id="keyFindingsList">
                                            <!-- Key findings will be populated by JavaScript -->
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recommendations Tab -->
                <div class="tab-pane fade" id="recommendations" role="tabpanel">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">30-Day Action Plan</h5>
                        </div>
                        <div class="card-body">
                            <div class="accordion" id="recommendationsAccordion">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#recommendations1" aria-expanded="true">
                                            Short-term Actions
                                        </button>
                                    </h2>
                                    <div id="recommendations1" class="accordion-collapse collapse show" data-bs-parent="#recommendationsAccordion">
                                        <div class="accordion-body">
                                            <ul id="shortTermRecommendations">
                                                <!-- Recommendations will be populated by JavaScript -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#recommendations2">
                                            Medium-term Strategy Adjustments
                                        </button>
                                    </h2>
                                    <div id="recommendations2" class="accordion-collapse collapse" data-bs-parent="#recommendationsAccordion">
                                        <div class="accordion-body">
                                            <ul id="mediumTermRecommendations">
                                                <!-- Recommendations will be populated by JavaScript -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#recommendations3">
                                            Long-term Development Plans
                                        </button>
                                    </h2>
                                    <div id="recommendations3" class="accordion-collapse collapse" data-bs-parent="#recommendationsAccordion">
                                        <div class="accordion-body">
                                            <ul id="longTermRecommendations">
                                                <!-- Recommendations will be populated by JavaScript -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Offers Tab -->
                <div class="tab-pane fade" id="offers" role="tabpanel">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Offer Management System</h5>
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addOfferModal" aria-label="Add new offer">
                                <i class="fas fa-plus"></i> Add Offer
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" aria-label="Offers management table">
                                    <thead>
                                        <tr>
                                            <th>Offer Name</th>
                                            <th>Type</th>
                                            <th>Discount</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="offersTable">
                                        <!-- Offers will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Feedback Analysis Tab -->
                <div class="tab-pane fade" id="feedback-analysis" role="tabpanel">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-value" id="totalFeedback">0</div>
                                <div class="metric-label">Total Feedback</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-value" id="avgRating">0.0</div>
                                <div class="metric-label">Average Rating</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-value" id="positiveFeedback">0%</div>
                                <div class="metric-label">Positive Feedback</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-value" id="negativeFeedback">0%</div>
                                <div class="metric-label">Negative Feedback</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Feedback by Category</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container" style="height: 300px;">
                                        <canvas id="feedbackCategoryChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Rating Distribution</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container" style="height: 300px;">
                                        <canvas id="ratingDistributionChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Recent Feedback</h5>
                                </div>
                                <div class="card-body">
                                    <div id="recentFeedbackList">
                                        <!-- Recent feedback will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Entry Page -->
        <div id="data-entry-page" class="page-content" style="display: none;">
            <div class="page-header">
                <h1>Data Entry</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Data Entry</li>
                    </ol>
                </nav>
            </div>

            <!-- Data Management Section -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Data Management</h5>
                </div>
                <div class="card-body">
                    <div class="data-management-card">
                        <div class="auto-save-toggle">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="autoSaveToggle" checked>
                                <label class="form-check-label" for="autoSaveToggle">
                                    Auto-save enabled
                                </label>
                            </div>
                            <span id="saveStatus" class="save-status save-saved">Saved</span>
                        </div>
                        
                        <div class="last-saved">
                            Last saved: <span id="lastSavedTime">Never</span>
                        </div>
                        
                        <div class="data-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="salesRecordsCount">0</div>
                                <div class="stat-label">Sales Records</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="offersCount">0</div>
                                <div class="stat-label">Offers</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="feedbackCount">0</div>
                                <div class="stat-label">Feedback</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalDataSize">0 KB</div>
                                <div class="stat-label">Data Size</div>
                            </div>
                        </div>
                        
                        <div class="btn-group w-100 mb-3" role="group">
                            <button type="button" class="btn btn-outline-primary" onclick="app.dataManager.saveData()">
                                <i class="fas fa-save"></i> Save Data
                            </button>
                            <button type="button" class="btn btn-outline-success" onclick="app.dataManager.exportData()">
                                <i class="fas fa-download"></i> Export Backup
                            </button>
                            <button type="button" class="btn btn-outline-info" onclick="app.dataManager.showImportModal()">
                                <i class="fas fa-upload"></i> Import Data
                            </button>
                            <button type="button" class="btn btn-outline-warning" onclick="app.dataManager.clearAllData()">
                                <i class="fas fa-trash-alt"></i> Clear All Data
                            </button>
                            <button type="button" class="btn btn-outline-secondary" onclick="app.dataManager.resetToSample()">
                                <i class="fas fa-undo"></i> Reset to Sample
                            </button>
                            <button type="button" class="btn btn-outline-danger" onclick="app.dataManager.exportToPDF()">
                                <i class="fas fa-file-pdf"></i> Export PDF
                            </button>
                        </div>
                        
                        <div class="mb-3">
                            <button class="btn btn-sm btn-outline-secondary" onclick="app.dataManager.undoLastAction()">
                                <i class="fas fa-undo"></i> Undo Last Action
                            </button>
                            <span class="ms-2 text-muted" id="undoStatus">No actions to undo</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Excel Import Section -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Excel Import</h5>
                </div>
                <div class="card-body">
                    <div class="excel-upload-section">
                        <h6><i class="fas fa-file-excel"></i> Import Sales Data from Excel</h6>
                        
                        <div class="excel-format-info">
                            <strong>Excel Format Requirements:</strong>
                            <ul class="mb-0">
                                <li><strong>Required columns:</strong> Date, Branch, Channel, Transactions, Sales, Offer Type, Offer Status</li>
                                <li><strong>Optional columns:</strong> Average per Order (calculated automatically), Notes</li>
                                <li><strong>Date format:</strong> YYYY-MM-DD (e.g., 2025-10-01)</li>
                                <li><strong>Branch names:</strong> Must match exactly: Crispy Chicken-Hamdan St, Crispy Chicken Khaldia, etc.</li>
                                <li><strong>Channels:</strong> Delivery, Dine-in, Takeaway</li>
                                <li><strong>Offer Types:</strong> Normal Day, Chicken Day, Ultimate</li>
                                <li><strong>Offer Status:</strong> Active, No Offer</li>
                                <li><strong>Transactions:</strong> Must be a positive integer</li>
                                <li><strong>Sales:</strong> Must be a positive number (AED)</li>
                            </ul>
                            <div class="mt-2">
                                <strong>Sample Format:</strong>
                                <table class="table table-sm mt-2">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Branch</th>
                                            <th>Channel</th>
                                            <th>Transactions</th>
                                            <th>Sales</th>
                                            <th>Offer Type</th>
                                            <th>Offer Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>2025-10-01</td>
                                            <td>Crispy Chicken-Hamdan St</td>
                                            <td>Delivery</td>
                                            <td>73</td>
                                            <td>3216.00</td>
                                            <td>Normal Day</td>
                                            <td>No Offer</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <small class="text-muted">
                                <i class="fas fa-info-circle"></i> 
                                The system will automatically calculate the average per order if not provided. 
                                Duplicate records (same date, branch, and channel) will be automatically removed.
                            </small>
                            <hr>
                            <small><a href="#" onclick="app.dataManager.downloadExcelTemplate()" class="text-primary">
                                <i class="fas fa-download"></i> Download Excel Template
                            </a></small>
                        </div>
                        
                        <div class="file-drop-area" id="fileDropArea">
                            <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                            <p class="mb-0">Drag and drop your Excel file here or <a href="#" id="browseLink">browse files</a></p>
                            <input type="file" id="excelFileInput" accept=".xlsx,.xls" class="d-none" aria-label="Select Excel file">
                        </div>
                        
                        <div class="progress d-none" id="importProgress">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                        </div>
                        
                        <div class="mt-3">
                            <button class="btn btn-primary d-none" id="importExcelBtn" onclick="app.dataManager.processExcelFile()">
                                <i class="fas fa-file-import"></i> Import Excel Data
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Add New Sales Data</h5>
                        </div>
                        <div class="card-body">
                            <form id="salesDataForm" novalidate>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="dateInput" class="form-label">Date</label>
                                        <input type="date" class="form-control" id="dateInput" required aria-describedby="dateInputHelp">
                                        <div class="invalid-feedback" id="dateInputFeedback"></div>
                                        <div id="dateInputHelp" class="form-text">Enter the date of the sales record</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="branchInput" class="form-label">Branch</label>
                                        <select class="form-select" id="branchInput" required aria-describedby="branchInputHelp">
                                            <option value="">Select Branch</option>
                                            <option value="Crispy Chicken-Hamdan St">Crispy Chicken-Hamdan St</option>
                                            <option value="Crispy Chicken Khaldia">Crispy Chicken Khaldia</option>
                                            <option value="Crispy Chicken Shabiya 11">Crispy Chicken Shabiya 11</option>
                                            <option value="Crispy Chicken Muroor">Crispy Chicken Muroor</option>
                                            <option value="Crispy Chicken Al Barsha">Crispy Chicken Al Barsha</option>
                                            <option value="Crispy Chicken Al Satwa">Crispy Chicken Al Satwa</option>
                                            <option value="Crispy Chicken Al Rgga">Crispy Chicken Al Rgga</option>
                                        </select>
                                        <div class="invalid-feedback" id="branchInputFeedback"></div>
                                        <div id="branchInputHelp" class="form-text">Select the branch where the sale occurred</div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="channelInput" class="form-label">Channel</label>
                                        <select class="form-select" id="channelInput" required aria-describedby="channelInputHelp">
                                            <option value="">Select Channel</option>
                                            <option value="Delivery">Delivery</option>
                                            <option value="Dine-in">Dine-in</option>
                                            <option value="Takeaway">Takeaway</option>
                                        </select>
                                        <div class="invalid-feedback" id="channelInputFeedback"></div>
                                        <div id="channelInputHelp" class="form-text">Select the sales channel</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="transactionsInput" class="form-label">Transactions</label>
                                        <input type="number" class="form-control" id="transactionsInput" min="0" required aria-describedby="transactionsInputHelp">
                                        <div class="form-text">Enter the number of transactions</div>
                                        <div class="invalid-feedback" id="transactionsInputFeedback"></div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="salesInput" class="form-label">Sales (AED)</label>
                                        <input type="number" class="form-control" id="salesInput" min="0" step="0.01" required aria-describedby="salesInputHelp">
                                        <div class="form-text">Enter the total sales amount in AED</div>
                                        <div class="invalid-feedback" id="salesInputFeedback"></div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="averageInput" class="form-label">Average per Order</label>
                                        <input type="number" class="form-control" id="averageInput" min="0" step="0.01" readonly aria-describedby="averageInputHelp">
                                        <div class="form-text">Calculated automatically</div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="offerTypeInput" class="form-label">Offer Type</label>
                                        <select class="form-select" id="offerTypeInput" required aria-describedby="offerTypeInputHelp">
                                            <option value="">Select Offer Type</option>
                                            <option value="Normal Day">Normal Day</option>
                                            <option value="Chicken Day">Chicken Day</option>
                                            <option value="Ultimate">Ultimate</option>
                                        </select>
                                        <div class="invalid-feedback" id="offerTypeInputFeedback"></div>
                                        <div id="offerTypeInputHelp" class="form-text">Select the offer type in effect</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="offerStatusInput" class="form-label">Offer Status</label>
                                        <select class="form-select" id="offerStatusInput" required aria-describedby="offerStatusInputHelp">
                                            <option value="">Select Status</option>
                                            <option value="Active">Active</option>
                                            <option value="No Offer">No Offer</option>
                                        </select>
                                        <div class="invalid-feedback" id="offerStatusInputFeedback"></div>
                                        <div id="offerStatusInputHelp" class="form-text">Select if the offer was active</div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="notesInput" class="form-label">Notes</label>
                                    <textarea class="form-control" id="notesInput" rows="2" placeholder="Additional notes (optional)" aria-describedby="notesInputHelp"></textarea>
                                    <div id="notesInputHelp" class="form-text">Optional notes about the sales record</div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary w-100">
                                    <i class="fas fa-save"></i> Save Data
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Add Customer Feedback</h5>
                        </div>
                        <div class="card-body">
                            <form id="feedbackForm" novalidate>
                                <div class="mb-3">
                                    <label for="feedbackDate" class="form-label">Date</label>
                                    <input type="date" class="form-control" id="feedbackDate" required aria-describedby="feedbackDateHelp">
                                    <div class="invalid-feedback" id="feedbackDateFeedback"></div>
                                    <div id="feedbackDateHelp" class="form-text">Enter the date of the feedback</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="feedbackBranch" class="form-label">Branch</label>
                                    <select class="form-select" id="feedbackBranch" required aria-describedby="feedbackBranchHelp">
                                        <option value="">Select Branch</option>
                                        <option value="Crispy Chicken-Hamdan St">Crispy Chicken-Hamdan St</option>
                                        <option value="Crispy Chicken Khaldia">Crispy Chicken Khaldia</option>
                                        <option value="Crispy Chicken Shabiya 11">Crispy Chicken Shabiya 11</option>
                                        <option value="Crispy Chicken Muroor">Crispy Chicken Muroor</option>
                                        <option value="Crispy Chicken Al Barsha">Crispy Chicken Al Barsha</option>
                                        <option value="Crispy Chicken Al Satwa">Crispy Chicken Al Satwa</option>
                                        <option value="Crispy Chicken Al Rgga">Crispy Chicken Al Rgga</option>
                                    </select>
                                    <div class="invalid-feedback" id="feedbackBranchFeedback"></div>
                                    <div id="feedbackBranchHelp" class="form-text">Select the branch where the feedback was received</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Rating</label>
                                    <div class="rating-input" id="feedbackRating" role="radiogroup" aria-label="Rating">
                                        <i class="fas fa-star" data-rating="1" role="radio" tabindex="0" aria-label="1 star"></i>
                                        <i class="fas fa-star" data-rating="2" role="radio" tabindex="0" aria-label="2 stars"></i>
                                        <i class="fas fa-star" data-rating="3" role="radio" tabindex="0" aria-label="3 stars"></i>
                                        <i class="fas fa-star" data-rating="4" role="radio" tabindex="0" aria-label="4 stars"></i>
                                        <i class="fas fa-star" data-rating="5" role="radio" tabindex="0" aria-label="5 stars"></i>
                                    </div>
                                    <input type="hidden" id="feedbackRatingValue" value="0" aria-required="true">
                                    <div class="invalid-feedback" id="feedbackRatingFeedback"></div>
                                    <div class="form-text">Select a rating from 1 to 5 stars</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="feedbackCategory" class="form-label">Category</label>
                                    <select class="form-select" id="feedbackCategory" required aria-describedby="feedbackCategoryHelp">
                                        <option value="">Select Category</option>
                                        <option value="Service">Service</option>
                                        <option value="Food">Food</option>
                                        <option value="Cleanliness">Cleanliness</option>
                                        <option value="Other">Other</option>
                                    </select>
                                    <div class="invalid-feedback" id="feedbackCategoryFeedback"></div>
                                    <div id="feedbackCategoryHelp" class="form-text">Select the category of feedback</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="feedbackComment" class="form-label">Comment</label>
                                    <textarea class="form-control" id="feedbackComment" rows="3" required placeholder="Please share your experience..." aria-describedby="feedbackCommentHelp"></textarea>
                                    <div class="invalid-feedback" id="feedbackCommentFeedback"></div>
                                    <div id="feedbackCommentHelp" class="form-text">Please provide detailed feedback about your experience</div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary w-100">
                                    <i class="fas fa-save"></i> Submit Feedback
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Data Records</h5>
                        </div>
                        <div class="card-body">
                            <ul class="nav nav-tabs mb-3" id="dataTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="sales-tab" data-bs-toggle="tab" data-bs-target="#sales" type="button" role="tab" aria-selected="true">Sales Data</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="feedback-tab" data-bs-toggle="tab" data-bs-target="#feedback" type="button" role="tab" aria-selected="false">Customer Feedback</button>
                                </li>
                            </ul>
                            
                            <div class="tab-content" id="dataTabsContent">
                                <div class="tab-pane fade show active" id="sales" role="tabpanel">
                                    <div class="table-responsive">
                                        <table class="table table-hover" aria-label="Sales data table">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Branch</th>
                                                    <th>Channel</th>
                                                    <th>Transactions</th>
                                                    <th>Sales (AED)</th>
                                                    <th>Average per Order</th>
                                                    <th>Offer Type</th>
                                                    <th>Offer Status</th>
                                                    <th>Notes</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="dataTable">
                                                <!-- Table content will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                
                                <div class="tab-pane fade" id="feedback" role="tabpanel">
                                    <div class="table-responsive">
                                        <table class="table table-hover" aria-label="Feedback data table">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Branch</th>
                                                    <th>Rating</th>
                                                    <th>Category</th>
                                                    <th>Comment</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="feedbackTable">
                                                <!-- Feedback table content will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Target Plan Page -->
        <div id="target-plan-page" class="page-content" style="display: none;">
            <div class="page-header">
                <h1>Management Target Plan</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Target Plan</li>
                    </ol>
                </nav>
            </div>

            <!-- Monthly Target Overview -->
            <div class="target-plan-card mb-4">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h3 class="mb-3">October 2025 Target Overview</h3>
                        <div class="target-progress mb-3">
                            <div class="target-progress-bar" id="monthlyTargetProgress" style="width: 0%">
                                0%
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="target-metric">
                                    <span class="target-metric-label">Monthly Target</span>
                                    <span class="target-metric-value" id="monthlyTargetValue">AED 0</span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="target-metric">
                                    <span class="target-metric-label">Current Achievement</span>
                                    <span class="target-metric-value" id="currentAchievementValue">AED 0</span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="target-metric">
                                    <span class="target-metric-label">Remaining</span>
                                    <span class="target-metric-value" id="remainingTargetValue">AED 0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 text-center">
                        <div class="target-summary-grid">
                            <div class="target-summary-item">
                                <div class="target-summary-value" id="daysRemaining">0</div>
                                <div class="target-summary-label">Days Remaining</div>
                            </div>
                            <div class="target-summary-item">
                                <div class="target-summary-value" id="dailyTargetNeeded">AED 0</div>
                                <div class="target-summary-label">Daily Target Needed</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Branch-wise Targets -->
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Branch-wise Target Performance</h5>
                    <div>
                        <button class="btn btn-sm btn-outline-primary me-2" onclick="app.targetPlan.exportTargetPlan()">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#editTargetModal">
                            <i class="fas fa-edit"></i> Edit Targets
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row" id="branchTargetsContainer">
                        <!-- Branch targets will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Target Allocation Chart -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Target Allocation by Branch</h5>
                        </div>
                        <div class="card-body">
                            <div class="target-allocation-chart">
                                <canvas id="targetAllocationChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Target vs Achievement</h5>
                        </div>
                        <div class="card-body">
                            <div class="target-allocation-chart">
                                <canvas id="targetVsAchievementChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Target History and Projections -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Target History & Projections</h5>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="targetHistoryChart"></canvas>
                    </div>
                    <div class="target-timeline">
                        <h6 class="mb-3">Target Milestones</h6>
                        <div id="targetTimeline">
                            <!-- Timeline items will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Management Report Page -->
        <div id="management-report-page" class="page-content" style="display: none;">
            <div class="page-header">
                <h1>Management Report</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Management Report</li>
                    </ol>
                </nav>
            </div>

            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Executive Summary</h5>
                </div>
                <div class="card-body">
                    <p>This report analyzes Crispy Chicken's sales data from <span id="reportDateRange">October 1-14, 2025</span>. During this period, the company achieved total sales of <span id="reportTotalSales">0</span> AED with <span id="reportTotalTransactions">0</span> transactions completed. The average transaction value was <span id="reportAvgTransaction">0</span> AED. Overall, the company performed well during this period, with particularly strong performance from the Hamdan St and Khaldia branches.</p>
                    <p>During the reporting period, we observed that weekend sales were significantly higher than weekdays, indicating that our marketing activities are more effective on weekends. Additionally, the Ultimate offer type had the highest conversion rate, suggesting we should promote more of these offers in the future.</p>
                </div>
            </div>

            <!-- Monthly Summary Section -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Monthly Summary</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" aria-label="Monthly summary table">
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>Branch</th>
                                    <th>Total Orders</th>
                                    <th>Total Sales (AED)</th>
                                    <th>Average Order (AED)</th>
                                    <th>Growth vs Last Month (%)</th>
                                    <th>Growth vs Last Year (%)</th>
                                    <th>Best Day</th>
                                </tr>
                            </thead>
                            <tbody id="monthlySummaryTable">
                                <!-- Table content will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Branch Performance Analysis</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container" style="height: 300px;">
                                <canvas id="branchPerformanceChart"></canvas>
                            </div>
                            <div class="mt-3">
                                <h6>Key Findings:</h6>
                                <ul id="branchPerformanceFindings">
                                    <!-- Findings will be populated by JavaScript -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Daily & Weekly Performance</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container" style="height: 300px;">
                                <canvas id="dailyWeeklyPerformanceChart"></canvas>
                            </div>
                            <div class="mt-3">
                                <h6>Key Findings:</h6>
                                <ul id="dailyWeeklyFindings">
                                    <!-- Findings will be populated by JavaScript -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Monthly Trend Analysis</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container" style="height: 300px;">
                                <canvas id="monthlyTrendChart"></canvas>
                            </div>
                            <div class="mt-3">
                                <h6>Key Findings:</h6>
                                <ul id="monthlyTrendFindings">
                                    <!-- Findings will be populated by JavaScript -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Target Distribution Plan</h5>
                        </div>
                        <div class="card-body">
                            <div class="chart-container" style="height: 300px;">
                                <canvas id="targetPlanChart"></canvas>
                            </div>
                            <div class="mt-3">
                                <h6>Target Distribution Recommendations:</h6>
                                <ul id="targetPlanFindings">
                                    <!-- Findings will be populated by JavaScript -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0">Customer Feedback Analysis</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="text-center">
                                <h3 id="reportTotalFeedback">0</h3>
                                <p>Total Feedback</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center">
                                <h3 id="reportAvgRating">0.0</h3>
                                <p>Average Rating</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center">
                                <h3 id="reportPositiveFeedback">0%</h3>
                                <p>Positive Feedback (4-5 stars)</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h6>Top Feedback Categories</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="chart-container" style="height: 250px;">
                                    <canvas id="feedbackCategoryReportChart"></canvas>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="chart-container" style="height: 250px;">
                                    <canvas id="feedbackRatingReportChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h6>Feedback Insights</h6>
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i> 
                            <strong>Key Feedback Insights:</strong> 
                            <ul id="feedbackInsightsList">
                                <!-- Insights will be populated by JavaScript -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0">Management Recommendations</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6>Short-term Recommendations</h6>
                            <ul id="shortTermManagementRecommendations">
                                <!-- Recommendations will be populated by JavaScript -->
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6>Medium-term Strategy Adjustments</h6>
                            <ul id="mediumTermManagementRecommendations">
                                <!-- Recommendations will be populated by JavaScript -->
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6>Long-term Development Plans</h6>
                            <ul id="longTermManagementRecommendations">
                                <!-- Recommendations will be populated by JavaScript -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feedback Management Page -->
        <div id="feedback-management-page" class="page-content" style="display: none;">
            <div class="page-header">
                <h1>Customer Feedback Management</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Feedback Management</li>
                    </ol>
                </nav>
            </div>

            <!-- Feedback Summary Cards -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="metric-card">
                        <div class="metric-value" id="feedbackTotal">0</div>
                        <div class="metric-label">Total Feedback</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card">
                        <div class="metric-value" id="feedbackAvgRating">0.0</div>
                        <div class="metric-label">Average Rating</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card">
                        <div class="metric-value" id="feedbackPositive">0%</div>
                        <div class="metric-label">Positive Feedback</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-card">
                        <div class="metric-value" id="feedbackNegative">0%</div>
                        <div class="metric-label">Negative Feedback</div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Feedback Management Tabs -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Feedback Management</h5>
                </div>
                <div class="card-body">
                    <ul class="nav nav-tabs" id="feedbackManagementTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="feedback-overview-tab" data-bs-toggle="tab" data-bs-target="#feedback-overview" type="button" role="tab" aria-selected="true">Overview</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="feedback-branch-tab" data-bs-toggle="tab" data-bs-target="#feedback-branch" type="button" role="tab" aria-selected="false">Branch Performance</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="feedback-category-tab" data-bs-toggle="tab" data-bs-target="#feedback-category" type="button" role="tab" aria-selected="false">Category Management</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="feedback-list-tab" data-bs-toggle="tab" data-bs-target="#feedback-list" type="button" role="tab" aria-selected="false">Feedback List</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content" id="feedbackManagementTabsContent">
                        <!-- Overview Tab -->
                        <div class="tab-pane fade show active" id="feedback-overview" role="tabpanel">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">Feedback by Category</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="chart-container" style="height: 300px;">
                                                <canvas id="feedbackOverviewCategoryChart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">Rating Distribution</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="chart-container" style="height: 300px;">
                                                <canvas id="feedbackOverviewRatingChart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Branch Performance Tab -->
                        <div class="tab-pane fade" id="feedback-branch" role="tabpanel">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Branch Performance Overview</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container" style="height: 300px;">
                                        <canvas id="feedbackBranchPerformanceChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Branch Performance Metrics</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover" aria-label="Branch performance metrics table">
                                            <thead>
                                                <tr>
                                                    <th>Branch</th>
                                                    <th>Total Feedback</th>
                                                    <th>Average Rating</th>
                                                    <th>Positive Feedback</th>
                                                    <th>Negative Feedback</th>
                                                    <th>Most Common Category</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="branchPerformanceTable">
                                                <!-- Branch performance data will be populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Category Management Tab -->
                        <div class="tab-pane fade" id="feedback-category" role="tabpanel">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Category Management</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6>Add New Category</h6>
                                            <form id="addCategoryForm">
                                                <div class="mb-3">
                                                    <label for="newCategoryName" class="form-label">Category Name</label>
                                                    <input type="text" class="form-control" id="newCategoryName" required aria-describedby="newCategoryNameHelp">
                                                    <div class="form-text">Enter a unique category name</div>
                                                    <div class="invalid-feedback" id="newCategoryNameFeedback"></div>
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label class="form-label">Category Color</label>
                                                    <div class="category-color-picker" id="categoryColorPicker">
                                                        <div class="color-option selected" style="background-color: #17a2b8;" data-color="#17a2b8"></div>
                                                        <div class="color-option" style="background-color: #ff6b35;" data-color="#ff6b35"></div>
                                                        <div class="color-option" style="background-color: #28a745;" data-color="#28a745"></div>
                                                        <div class="color-option" style="background-color: #ffc107;" data-color="#ffc107"></div>
                                                        <div class="color-option" style="background-color: #dc3545;" data-color="#dc3545"></div>
                                                        <div class="color-option" style="background-color: #6f42c1;" data-color="#6f42c1"></div>
                                                        <div class="color-option" style="background-color: #20c997;" data-color="#20c997"></div>
                                                        <div class="color-option" style="background-color: #fd7e14;" data-color="#fd7e14"></div>
                                                    </div>
                                                </div>
                                                
                                                <button type="submit" class="btn btn-primary">Add Category</button>
                                            </form>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Existing Categories</h6>
                                            <div id="existingCategories">
                                                <!-- Existing categories will be populated by JavaScript -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Feedback List Tab -->
                        <div class="tab-pane fade" id="feedback-list" role="tabpanel">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Customer Feedback List</h5>
                                </div>
                                <div class="card-body">
                                    <div id="feedbackListContainer">
                                        <!-- Feedback list will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Management Page -->
        <div id="data-management-page" class="page-content" style="display: none;">
            <div class="page-header">
                <h1>Advanced Data Management</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Data Management</li>
                    </ol>
                </nav>
            </div>

            <!-- Data Management Tabs -->
            <ul class="nav nav-tabs mb-4" id="dataManagementTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="save-slots-tab" data-bs-toggle="tab" data-bs-target="#save-slots" type="button" role="tab" aria-selected="true">Save Slots</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="backup-tab" data-bs-toggle="tab" data-bs-target="#backup" type="button" role="tab" aria-selected="false">Backup System</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="recovery-tab" data-bs-toggle="tab" data-bs-target="#recovery" type="button" role="tab" aria-selected="false">Data Recovery</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="import-export-tab" data-bs-toggle="tab" data-bs-target="#import-export" type="button" role="tab" aria-selected="false">Import/Export</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="integrity-tab" data-bs-toggle="tab" data-bs-target="#integrity" type="button" role="tab" aria-selected="false">Data Integrity</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="schedule-tab" data-bs-toggle="tab" data-bs-target="#schedule" type="button" role="tab" aria-selected="false">Backup Schedule</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="cloud-tab" data-bs-toggle="tab" data-bs-target="#cloud" type="button" role="tab" aria-selected="false">Cloud Storage</button>
                </li>
            </ul>

            <div class="tab-content" id="dataManagementTabsContent">
                <!-- Save Slots Tab -->
                <div class="tab-pane fade show active" id="save-slots" role="tabpanel">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Save Slots Management</h5>
                            <div>
                                <button class="btn btn-sm btn-outline-primary me-2" onclick="app.dataManager.createNewSaveSlot()">
                                    <i class="fas fa-plus"></i> New Save Slot
                                </button>
                                <button class="btn btn-sm btn-outline-success" onclick="app.dataManager.quickSave()">
                                    <i class="fas fa-save"></i> Quick Save
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="saveSlotFilter">
                                            <option value="all">All Save Slots</option>
                                            <option value="recent">Recent (Last 7 Days)</option>
                                            <option value="week">This Week</option>
                                            <option value="month">This Month</option>
                                        </select>
                                        <label for="saveSlotFilter">Filter Save Slots</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="saveSlotSearch" placeholder="Search save slots">
                                        <label for="saveSlotSearch">Search Save Slots</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="saveSlotsContainer">
                                <!-- Save slots will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Save Slot Comparison</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-5">
                                    <div class="form-floating">
                                        <select class="form-select" id="compareSlot1">
                                            <option value="">Select First Save Slot</option>
                                        </select>
                                        <label for="compareSlot1">First Save Slot</label>
                                    </div>
                                </div>
                                <div class="col-md-2 d-flex align-items-center justify-content-center">
                                    <span>VS</span>
                                </div>
                                <div class="col-md-5">
                                    <div class="form-floating">
                                        <select class="form-select" id="compareSlot2">
                                            <option value="">Select Second Save Slot</option>
                                        </select>
                                        <label for="compareSlot2">Second Save Slot</label>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary w-100" onclick="app.dataManager.compareSaveSlots()">Compare Save Slots</button>
                            
                            <div id="saveSlotComparison" class="mt-4">
                                <!-- Comparison results will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Backup Tab -->
                <div class="tab-pane fade" id="backup" role="tabpanel">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Backup System</h5>
                            <button class="btn btn-primary" onclick="app.dataManager.createBackup()">
                                <i class="fas fa-download"></i> Create Backup
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="backupType">
                                            <option value="full">Full Backup</option>
                                            <option value="incremental">Incremental Backup</option>
                                            <option value="differential">Differential Backup</option>
                                        </select>
                                        <label for="backupType">Backup Type</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="backupLocation">
                                            <option value="local">Local Storage</option>
                                            <option value="cloud">Cloud Storage</option>
                                            <option value="both">Both Locations</option>
                                        </select>
                                        <label for="backupLocation">Backup Location</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="compressBackup" checked>
                                <label class="form-check-label" for="compressBackup">
                                    Compress backup to save space
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="encryptBackup">
                                <label class="form-check-label" for="encryptBackup">
                                    Encrypt backup for security
                                </label>
                            </div>
                            
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i> 
                                <strong>Backup Information:</strong> 
                                <ul class="mb-0">
                                    <li><strong>Full Backup:</strong> Complete backup of all data</li>
                                    <li><strong>Incremental Backup:</strong> Only changes since last backup</li>
                                    <li><strong>Differential Backup:</strong> All changes since last full backup</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Backup History</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="backupFilter">
                                            <option value="all">All Backups</option>
                                            <option value="automatic">Automatic Backups</option>
                                            <option value="manual">Manual Backups</option>
                                            <option value="scheduled">Scheduled Backups</option>
                                        </select>
                                        <label for="backupFilter">Filter Backups</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="backupLocationFilter">
                                            <option value="all">All Locations</option>
                                            <option value="local">Local Storage</option>
                                            <option value="cloud">Cloud Storage</option>
                                        </select>
                                        <label for="backupLocationFilter">Filter by Location</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="backupHistoryContainer">
                                <!-- Backup history will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recovery Tab -->
                <div class="tab-pane fade" id="recovery" role="tabpanel">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Data Recovery</h5>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-warning">
                                <i class="fas fa-exclamation-triangle"></i> 
                                <strong>Warning:</strong> 
                                Recovery will replace your current data. Make sure to create a backup of your current data before proceeding with recovery.
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="recoverySource">
                                            <option value="backup">From Backup</option>
                                            <option value="saveSlot">From Save Slot</option>
                                            <option value="autoRecovery">Auto-Recovery Point</option>
                                        </select>
                                        <label for="recoverySource">Recovery Source</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="recoveryTarget">
                                            <option value="all">All Data</option>
                                            <option value="sales">Sales Data Only</option>
                                            <option value="feedback">Feedback Data Only</option>
                                            <option value="offers">Offers Data Only</option>
                                            <option value="targets">Target Plans Only</option>
                                        </select>
                                        <label for="recoveryTarget">Recovery Target</label>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary w-100" onclick="app.dataManager.searchRecoveryPoints()">Search Recovery Points</button>
                            
                            <div id="recoveryPointsContainer" class="mt-4">
                                <!-- Recovery points will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Auto-Recovery Points</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="enableAutoRecovery" checked>
                                <label class="form-check-label" for="enableAutoRecovery">
                                    Enable automatic recovery points
                                </label>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="autoRecoveryInterval" value="5" min="1" max="24">
                                        <label for="autoRecoveryInterval">Recovery Point Interval (hours)</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="maxRecoveryPoints" value="10" min="3" max="30">
                                        <label for="maxRecoveryPoints">Maximum Recovery Points</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i> 
                                <strong>Auto-Recovery Information:</strong> 
                                The system automatically creates recovery points at regular intervals. These points can be used to restore data in case of corruption or accidental deletion.
                            </div>
                            
                            <div id="autoRecoveryPointsContainer">
                                <!-- Auto-recovery points will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Import/Export Tab -->
                <div class="tab-pane fade" id="import-export" role="tabpanel">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Import Data</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="importDataType">
                                            <option value="all">All Data</option>
                                            <option value="sales">Sales Data Only</option>
                                            <option value="feedback">Feedback Data Only</option>
                                            <option value="offers">Offers Data Only</option>
                                            <option value="targets">Target Plans Only</option>
                                        </select>
                                        <label for="importDataType">Data Type to Import</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="importFormat">
                                            <option value="json">JSON Format</option>
                                            <option value="excel">Excel Format</option>
                                            <option value="csv">CSV Format</option>
                                        </select>
                                        <label for="importFormat">Import Format</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="validateImport" checked>
                                <label class="form-check-label" for="validateImport">
                                    Validate data before import
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="mergeImport">
                                <label class="form-check-label" for="mergeImport">
                                    Merge with existing data (instead of replacing)
                                </label>
                            </div>
                            
                            <div class="file-drop-area" id="importFileDropArea">
                                <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                <p class="mb-0">Drag and drop your file here or <a href="#" id="importBrowseLink">browse files</a></p>
                                <input type="file" id="importFileInput" class="d-none" aria-label="Select import file">
                            </div>
                            
                            <div class="progress d-none" id="importProgress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                            </div>
                            
                            <button class="btn btn-primary w-100 mt-3 d-none" id="importBtn" onclick="app.dataManager.performImport()">
                                <i class="fas fa-file-import"></i> Import Data
                            </button>
                            
                            <div id="importValidationResults" class="mt-4">
                                <!-- Import validation results will be displayed here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Export Data</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="exportDataType">
                                            <option value="all">All Data</option>
                                            <option value="sales">Sales Data Only</option>
                                            <option value="feedback">Feedback Data Only</option>
                                            <option value="offers">Offers Data Only</option>
                                            <option value="targets">Target Plans Only</option>
                                        </select>
                                        <label for="exportDataType">Data Type to Export</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="exportFormat">
                                            <option value="json">JSON Format</option>
                                            <option value="excel">Excel Format</option>
                                            <option value="csv">CSV Format</option>
                                            <option value="pdf">PDF Report</option>
                                        </select>
                                        <label for="exportFormat">Export Format</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="exportStartDate" value="2025-10-01">
                                        <label for="exportStartDate">Start Date</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="date" class="form-control" id="exportEndDate" value="2025-10-14">
                                        <label for="exportEndDate">End Date</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="compressExport">
                                <label class="form-check-label" for="compressExport">
                                    Compress export file
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="includeMetadata" checked>
                                <label class="form-check-label" for="includeMetadata">
                                    Include metadata (timestamps, etc.)
                                </label>
                            </div>
                            
                            <button class="btn btn-primary w-100" onclick="app.dataManager.performExport()">
                                <i class="fas fa-file-export"></i> Export Data
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Data Integrity Tab -->
                <div class="tab-pane fade" id="integrity" role="tabpanel">
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Data Integrity Checks</h5>
                            <button class="btn btn-primary" onclick="app.dataManager.runIntegrityCheck()">
                                <i class="fas fa-shield-alt"></i> Run Integrity Check
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkSalesData" checked>
                                        <label class="form-check-label" for="checkSalesData">
                                            Check Sales Data
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkFeedbackData" checked>
                                        <label class="form-check-label" for="checkFeedbackData">
                                            Check Feedback Data
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkOffersData" checked>
                                        <label class="form-check-label" for="checkOffersData">
                                            Check Offers Data
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkTargetPlans" checked>
                                        <label class="form-check-label" for="checkTargetPlans">
                                            Check Target Plans
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkDataConsistency" checked>
                                        <label class="form-check-label" for="checkDataConsistency">
                                            Check Data Consistency
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="checkDataCompleteness" checked>
                                        <label class="form-check-label" for="checkDataCompleteness">
                                            Check Data Completeness
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle"></i> 
                                <strong>Integrity Check Information:</strong> 
                                The system will check for data corruption, inconsistencies, and missing data. This process may take a few minutes depending on the amount of data.
                            </div>
                            
                            <div id="integrityCheckResults">
                                <!-- Integrity check results will be displayed here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Data Repair Options</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="autoRepairData">
                                        <label class="form-check-label" for="autoRepairData">
                                            Attempt to repair data automatically
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="createBackupBeforeRepair" checked>
                                        <label class="form-check-label" for="createBackupBeforeRepair">
                                            Create backup before attempting repair
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="logRepairActions" checked>
                                        <label class="form-check-label" for="logRepairActions">
                                            Log all repair actions
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="notifyOnRepair" checked>
                                        <label class="form-check-label" for="notifyOnRepair">
                                            Notify on repair completion
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <button class="btn btn-warning w-100" onclick="app.dataManager.repairData()">
                                <i class="fas fa-tools"></i> Repair Data Issues
                            </button>
                            
                            <div id="dataRepairResults" class="mt-4">
                                <!-- Data repair results will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Backup Schedule Tab -->
                <div class="tab-pane fade" id="schedule" role="tabpanel">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Backup Schedule</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="backupFrequency">
                                            <option value="daily">Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly">Monthly</option>
                                            <option value="custom">Custom</option>
                                        </select>
                                        <label for="backupFrequency">Backup Frequency</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="time" class="form-control" id="backupTime" value="02:00">
                                        <label for="backupTime">Backup Time</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-3" id="customScheduleOptions" style="display: none;">
                                <div class="col-md-12">
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="customInterval" value="6" min="1" max="24">
                                        <label for="customInterval">Custom Interval (hours)</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="backupRetention">
                                            <option value="7">Keep for 7 days</option>
                                            <option value="14">Keep for 14 days</option>
                                            <option value="30">Keep for 30 days</option>
                                            <option value="90">Keep for 90 days</option>
                                            <option value="365">Keep for 1 year</option>
                                        </select>
                                        <label for="backupRetention">Backup Retention</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="backupTypeSchedule">
                                            <option value="full">Full Backup</option>
                                            <option value="incremental">Incremental Backup</option>
                                            <option value="differential">Differential Backup</option>
                                        </select>
                                        <label for="backupTypeSchedule">Default Backup Type</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="enableScheduledBackup">
                                <label class="form-check-label" for="enableScheduledBackup">
                                    Enable scheduled backups
                                </label>
                            </div>
                            
                            <button class="btn btn-primary w-100" onclick="app.dataManager.saveBackupSchedule()">
                                <i class="fas fa-save"></i> Save Backup Schedule
                            </button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Scheduled Backups</h5>
                        </div>
                        <div class="card-body">
                            <div id="scheduledBackupsContainer">
                                <!-- Scheduled backups will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cloud Storage Tab -->
                <div class="tab-pane fade" id="cloud" role="tabpanel">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Cloud Storage Configuration</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <select class="form-select" id="cloudProvider">
                                            <option value="dropbox">Dropbox</option>
                                            <option value="googledrive">Google Drive</option>
                                            <option value="onedrive">OneDrive</option>
                                            <option value="icloud">iCloud</option>
                                            <option value="custom">Custom Cloud Storage</option>
                                        </select>
                                        <label for="cloudProvider">Cloud Storage Provider</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="cloudFolder" placeholder="CrispyChicken/Backups">
                                        <label for="cloudFolder">Cloud Folder Path</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="password" class="form-control" id="cloudApiKey" placeholder="API Key">
                                        <label for="cloudApiKey">API Key / Access Token</label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-floating">
                                        <input type="text" class="form-control" id="cloudAccount" placeholder="user@example.com">
                                        <label for="cloudAccount">Account Email</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="enableCloudBackup">
                                <label class="form-check-label" for="enableCloudBackup">
                                    Enable cloud backup
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="encryptCloudBackup" checked>
                                <label class="form-check-label" for="encryptCloudBackup">
                                    Encrypt cloud backups
                                </label>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="syncToCloud">
                                <label class="form-check-label" for="syncToCloud">
                                    Sync local saves to cloud
                                </label>
                            </div>
                            
                            <button class="btn btn-primary w-100" onclick="app.dataManager.saveCloudSettings()">
                                <i class="fas fa-save"></i> Save Cloud Settings
                            </button>
                            
                            <button class="btn btn-outline-primary w-100 mt-2" onclick="app.dataManager.testCloudConnection()">
                                <i class="fas fa-plug"></i> Test Cloud Connection
                            </button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Cloud Storage Status</h5>
                        </div>
                        <div class="card-body">
                            <div id="cloudStorageStatus">
                                <!-- Cloud storage status will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Target Modal -->
    <div class="modal fade" id="editTargetModal" tabindex="-1" aria-labelledby="editTargetModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editTargetModalLabel">Edit Monthly Targets</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editTargetForm">
                        <div class="mb-3">
                            <label for="targetMonth" class="form-label">Month</label>
                            <input type="month" class="form-control" id="targetMonth" value="2025-10" required>
                        </div>
                        <div class="mb-3">
                            <label for="totalMonthlyTarget" class="form-label">Total Monthly Target (AED)</label>
                            <input type="number" class="form-control" id="totalMonthlyTarget" min="0" step="100" required>
                            <div class="form-text">Enter the total target for all branches combined</div>
                        </div>
                        <h6>Branch-wise Targets</h6>
                        <div id="branchTargetInputs">
                            <!-- Branch target inputs will be populated by JavaScript -->
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="app.targetPlan.saveTargetPlan()">Save Targets</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Offer Modal -->
    <div class="modal fade" id="addOfferModal" tabindex="-1" aria-labelledby="addOfferModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addOfferModalLabel">Add New Offer</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addOfferForm">
                        <div class="mb-3">
                            <label for="offerName" class="form-label">Offer Name</label>
                            <input type="text" class="form-control" id="offerName" required>
                        </div>
                        <div class="mb-3">
                            <label for="offerType" class="form-label">Offer Type</label>
                            <select class="form-select" id="offerType" required>
                                <option value="">Select Type</option>
                                <option value="Normal Day">Normal Day</option>
                                <option value="Chicken Day">Chicken Day</option>
                                <option value="Ultimate">Ultimate</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="offerDiscount" class="form-label">Discount (%)</label>
                            <input type="number" class="form-control" id="offerDiscount" min="0" max="100" required>
                        </div>
                        <div class="mb-3">
                            <label for="offerStartDate" class="form-label">Start Date</label>
                            <input type="date" class="form-control" id="offerStartDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="offerEndDate" class="form-label">End Date</label>
                            <input type="date" class="form-control" id="offerEndDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="offerStatus" class="form-label">Status</label>
                            <select class="form-select" id="offerStatus" required>
                                <option value="">Select Status</option>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="app.offersManager.addOffer()">Add Offer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="importModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="importModalLabel">Import Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="importType" class="form-label">Import Type</label>
                        <select class="form-select" id="importType">
                            <option value="sales">Sales Data</option>
                            <option value="feedback">Customer Feedback</option>
                            <option value="both">Both</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="importFile" class="form-label">Select File</label>
                        <input type="file" class="form-control" id="importFile" accept=".xlsx,.xls,.json">
                    </div>
                    <div class="form-text">
                        Supported formats: Excel (.xlsx, .xls) and JSON (.json)
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="app.dataManager.performImport()">Import</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
        // Main Application Class
        class CrispyChickenApp {
            constructor() {
                this.dashboard = new Dashboard(this);
                this.dataManager = new DataManager(this);
                this.targetPlan = new TargetPlan(this);
                this.offersManager = new OffersManager(this);
                this.feedbackManager = new FeedbackManager(this);
                this.chartManager = new ChartManager(this);
                this.errorHandler = new ErrorHandler(this);
                
                this.currentPage = 'dashboard';
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadInitialData();
                this.dashboard.render();
                this.dataManager.updateDataStats();
                this.targetPlan.update();
                this.feedbackManager.updateSummary();
            }

            setupEventListeners() {
                // Navigation links
                document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const pageId = e.target.getAttribute('data-page');
                        this.showPage(pageId);
                    });
                });

                // Sales data form
                document.getElementById('salesDataForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.dataManager.saveSalesData();
                });

                // Feedback form
                document.getElementById('feedbackForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.feedbackManager.saveFeedback();
                });

                // Auto-save toggle
                document.getElementById('autoSaveToggle').addEventListener('change', () => {
                    this.dataManager.updateSaveStatus();
                });

                // Auto-refresh checkbox
                document.getElementById('autoRefresh').addEventListener('change', () => {
                    if (document.getElementById('autoRefresh').checked) {
                        this.dashboard.update();
                    }
                });

                // Date inputs change event
                document.getElementById('startDate').addEventListener('change', () => {
                    if (document.getElementById('autoRefresh').checked) {
                        this.dashboard.update();
                    }
                });

                document.getElementById('endDate').addEventListener('change', () => {
                    if (document.getElementById('autoRefresh').checked) {
                        this.dashboard.update();
                    }
                });

                // Calculate average when sales or transactions change
                document.getElementById('salesInput').addEventListener('input', () => this.dataManager.calculateAverage());
                document.getElementById('transactionsInput').addEventListener('input', () => this.dataManager.calculateAverage());
            }

            showPage(pageId) {
                // Hide all pages
                document.querySelectorAll('.page-content').forEach(page => {
                    page.style.display = 'none';
                });

                // Show selected page
                document.getElementById(`${pageId}-page`).style.display = 'block';

                // Update navigation
                document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                document.querySelector(`[data-page="${pageId}"]`).classList.add('active');

                // Update current page
                this.currentPage = pageId;

                // Update page-specific content
                switch(pageId) {
                    case 'dashboard':
                        this.dashboard.update();
                        break;
                    case 'data-entry':
                        this.dataManager.updateDataStats();
                        this.dataManager.updateDataTable();
                        this.feedbackManager.updateTable();
                        break;
                    case 'management-report':
                        this.dashboard.updateManagementReport();
                        break;
                    case 'target-plan':
                        this.targetPlan.update();
                        break;
                    case 'feedback-management':
                        this.feedbackManager.update();
                        break;
                    case 'data-management':
                        this.dataManager.updateDataManagement();
                        break;
                }
            }

            loadInitialData() {
                this.dataManager.loadSampleData();
                this.targetPlan.loadSampleTargetPlan();
                this.dataManager.loadFromLocalStorage();
            }

            updateAllUI() {
                this.dataManager.updateDataStats();
                this.dataManager.updateDataTable();
                this.feedbackManager.updateTable();
                this.dashboard.update();
                this.feedbackManager.updateSummary();
                this.dashboard.updateManagementReport();
                this.feedbackManager.update();
                this.targetPlan.update();
                this.offersManager.updateTable();
            }
        }

        // Dashboard Module
        class Dashboard {
            constructor(app) {
                this.app = app;
                this.charts = {};
            }

            setDateRange(range) {
                const today = new Date();
                const startDate = document.getElementById('startDate');
                const endDate = document.getElementById('endDate');

                switch(range) {
                    case 'today':
                        const todayStr = today.toISOString().split('T')[0];
                        startDate.value = todayStr;
                        endDate.value = todayStr;
                        break;
                    case 'yesterday':
                        const yesterday = new Date(today);
                        yesterday.setDate(yesterday.getDate() - 1);
                        const yesterdayStr = yesterday.toISOString().split('T')[0];
                        startDate.value = yesterdayStr;
                        endDate.value = yesterdayStr;
                        break;
                    case 'last7days':
                        const lastWeek = new Date(today);
                        lastWeek.setDate(lastWeek.getDate() - 7);
                        startDate.value = lastWeek.toISOString().split('T')[0];
                        endDate.value = today.toISOString().split('T')[0];
                        break;
                    case 'last30days':
                        const lastMonth = new Date(today);
                        lastMonth.setDate(lastMonth.getDate() - 30);
                        startDate.value = lastMonth.toISOString().split('T')[0];
                        endDate.value = today.toISOString().split('T')[0];
                        break;
                    case 'thismonth':
                        const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
                        startDate.value = firstDayOfMonth.toISOString().split('T')[0];
                        endDate.value = today.toISOString().split('T')[0];
                        break;
                    case 'lastmonth':
                        const firstDayOfLastMonth = new Date(today.getFullYear(), today.getMonth() - 1, 1);
                        const lastDayOfLastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                        startDate.value = firstDayOfLastMonth.toISOString().split('T')[0];
                        endDate.value = lastDayOfLastMonth.toISOString().split('T')[0];
                        break;
                }

                this.update();
            }

            update() {
                // Get date range
                const startDate = document.getElementById('startDate').value;
                const endDate = document.getElementById('endDate').value;

                // Filter data based on date range
                let filteredSales = this.app.dataManager.salesData.filter(sale => {
                    const saleDate = new Date(sale.date);
                    return saleDate >= new Date(startDate) && saleDate <= new Date(endDate);
                });

                // Apply branch filter
                const branchFilter = document.getElementById('branchFilter').value;
                if (branchFilter !== 'all') {
                    filteredSales = filteredSales.filter(sale => sale.branch === branchFilter);
                }

                // Apply offer filter
                const offerFilter = document.getElementById('offerFilter').value;
                if (offerFilter !== 'all') {
                    filteredSales = filteredSales.filter(sale => sale.offerType === offerFilter);
                }

                // Calculate metrics
                const totalSales = filteredSales.reduce((sum, sale) => sum + parseFloat(sale.sales), 0);
                const totalTransactions = filteredSales.reduce((sum, sale) => sum + parseInt(sale.transactions), 0);
                const avgTransaction = totalTransactions > 0 ? totalSales / totalTransactions : 0;

                // Calculate dynamic target based on historical data
                const avgDailySales = totalSales / Math.max(1, filteredSales.length);
                const targetSales = avgDailySales * 30; // Monthly target based on average daily sales
                const targetAchievement = targetSales > 0 ? Math.min(100, (totalSales / targetSales) * 100) : 0;

                // Update metric cards
                document.getElementById('totalSales').textContent = this.formatCurrency(totalSales);
                document.getElementById('totalTransactions').textContent = totalTransactions;
                document.getElementById('avgTransaction').textContent = this.formatCurrency(avgTransaction);
                document.getElementById('targetAchievement').textContent = `${targetAchievement.toFixed(1)}%`;

                // Update charts
                this.updateSalesTrendChart(filteredSales);
                this.updateBranchSalesChart(filteredSales);
                this.updateDailySalesTable(filteredSales);
                this.updatePerformanceCharts(filteredSales);
                this.updateTrendsCharts(filteredSales);
                this.updateInsights(filteredSales);
                this.updateFeedbackAnalysis(filteredSales);
            }

            formatCurrency(value) {
                return new Intl.NumberFormat('en-AE', {
                    style: 'currency',
                    currency: 'AED',
                    minimumFractionDigits: 2
                }).format(value);
            }

            updateSalesTrendChart(data) {
                const ctx = document.getElementById('salesTrendChart');
                if (!ctx) return;

                // Group data by date
                const groupedData = {};
                data.forEach(sale => {
                    if (!groupedData[sale.date]) {
                        groupedData[sale.date] = 0;
                    }
                    groupedData[sale.date] += parseFloat(sale.sales);
                });

                // Sort dates
                const sortedDates = Object.keys(groupedData).sort();

                // Destroy existing chart if it exists
                if (this.charts.salesTrend) {
                    this.charts.salesTrend.destroy();
                }

                // Create new chart
                this.charts.salesTrend = new Chart(ctx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: sortedDates,
                        datasets: [{
                            label: 'Sales (AED)',
                            data: sortedDates.map(date => groupedData[date]),
                            borderColor: '#ff6b35',
                            backgroundColor: 'rgba(255, 107, 53, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `Sales: ${new Intl.NumberFormat('en-AE', {
                                            style: 'currency',
                                            currency: 'AED',
                                            minimumFractionDigits: 2
                                        }).format(context.parsed.y)}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return new Intl.NumberFormat('en-AE', {
                                            style: 'currency',
                                            currency: 'AED',
                                            minimumFractionDigits: 2
                                        }).format(value);
                                    }
                                }
                            }
                        }
                    }
                });
            }

            updateBranchSalesChart(data) {
                const ctx = document.getElementById('branchSalesChart');
                if (!ctx) return;

                // Group data by branch
                const groupedData = {};
                data.forEach(sale => {
                    if (!groupedData[sale.branch]) {
                        groupedData[sale.branch] = 0;
                    }
                    groupedData[sale.branch] += parseFloat(sale.sales);
                });

                // Destroy existing chart if it exists
                if (this.charts.branchSales) {
                    this.charts.branchSales.destroy();
                }

                // Create new chart
                this.charts.branchSales = new Chart(ctx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(groupedData),
                        datasets: [{
                            data: Object.values(groupedData),
                            backgroundColor: [
                                '#ff6b35',
                                '#f7931e',
                                '#ffc107',
                                '#28a745',
                                '#17a2b8',
                                '#6f42c1',
                                '#dc3545'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${new Intl.NumberFormat('en-AE', {
                                            style: 'currency',
                                            currency: 'AED',
                                            minimumFractionDigits: 2
                                        }).format(context.parsed)}`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            updateDailySalesTable(data) {
                const tbody = document.getElementById('dailySalesTable');
                if (!tbody) return;

                tbody.innerHTML = '';

                // Sort data by date (newest first)
                const sortedData = [...data].sort((a, b) => new Date(b.date) - new Date(a.date));

                // Limit to 10 records
                const displayData = sortedData.slice(0, 10);

                displayData.forEach(sale => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${sale.date}</td>
                        <td>${sale.branch}</td>
                        <td>${sale.channel}</td>
                        <td>${sale.transactions}</td>
                        <td>${this.formatCurrency(sale.sales)}</td>
                        <td>${this.formatCurrency(parseFloat(sale.sales) / parseInt(sale.transactions))}</td>
                        <td><span class="offer-badge offer-${sale.offerType.toLowerCase().replace(' ', '')}">${sale.offerType}</span></td>
                        <td><span class="badge ${sale.offerStatus === 'Active' ? 'bg-success' : 'bg-secondary'}">${sale.offerStatus}</span></td>
                    `;
                    tbody.appendChild(row);
                });
            }

            updatePerformanceCharts(data) {
                // Implementation would continue here for other charts
                // This is a simplified version for demonstration
            }

            updateTrendsCharts(data) {
                // Implementation would continue here for trends charts
            }

            updateInsights(data) {
                // Implementation would continue here for insights
            }

            updateFeedbackAnalysis(data) {
                // Implementation would continue here for feedback analysis
            }

            updateManagementReport() {
                // Implementation for management report
            }

            render() {
                this.update();
            }
        }

        // Data Manager Module
        class DataManager {
            constructor(app) {
                this.app = app;
                this.salesData = [];
                this.feedbackData = [];
                this.offers = [];
                this.undoStack = [];
                this.saveSlots = [];
                this.backups = [];
            }

            saveSalesData() {
                try {
                    // Get form values
                    const formData = {
                        date: document.getElementById('dateInput').value,
                        branch: document.getElementById('branchInput').value,
                        channel: document.getElementById('channelInput').value,
                        transactions: parseInt(document.getElementById('transactionsInput').value),
                        sales: parseFloat(document.getElementById('salesInput').value),
                        average: parseFloat(document.getElementById('averageInput').value),
                        offerType: document.getElementById('offerTypeInput').value,
                        offerStatus: document.getElementById('offerStatusInput').value,
                        notes: document.getElementById('notesInput').value
                    };

                    // Validate form
                    if (!this.validateSalesForm(formData)) {
                        return;
                    }

                    // Add to data array
                    this.salesData.push(formData);

                    // Add to undo stack
                    this.undoStack.push({
                        action: 'add',
                        type: 'sales',
                        data: formData
                    });

                    // Update all UI components
                    this.app.updateAllUI();

                    // Reset form
                    document.getElementById('salesDataForm').reset();
                    document.getElementById('averageInput').value = '0.00';

                    // Show notification
                    this.app.errorHandler.showSuccess('Sales data saved successfully!');

                    // Auto-save if enabled
                    if (document.getElementById('autoSaveToggle').checked) {
                        this.autoSave();
                    }

                    // Save to local storage
                    this.saveToLocalStorage();
                } catch (error) {
                    console.error('Error saving sales data:', error);
                    this.app.errorHandler.showError(`Error saving data: ${error.message}`);
                }
            }

            validateSalesForm(data) {
                // Implementation for form validation
                return true;
            }

            calculateAverage() {
                const sales = parseFloat(document.getElementById('salesInput').value) || 0;
                const transactions = parseInt(document.getElementById('transactionsInput').value) || 0;

                if (transactions > 0) {
                    const average = sales / transactions;
                    document.getElementById('averageInput').value = average.toFixed(2);
                } else {
                    document.getElementById('averageInput').value = '0.00';
                }
            }

            saveData() {
                // Implementation for saving data
            }

            exportData() {
                // Implementation for exporting data
            }

            clearAllData() {
                // Implementation for clearing data
            }

            resetToSample() {
                // Implementation for resetting to sample data
            }

            undoLastAction() {
                // Implementation for undo functionality
            }

            loadSampleData() {
                // Implementation for loading sample data
            }

            loadFromLocalStorage() {
                // Implementation for loading from localStorage
            }

            saveToLocalStorage() {
                // Implementation for saving to localStorage
            }

            updateDataStats() {
                // Implementation for updating data statistics
            }

            updateDataTable() {
                // Implementation for updating data table
            }

            // ... Additional methods for data management
        }

        // Target Plan Module
        class TargetPlan {
            constructor(app) {
                this.app = app;
                this.targetPlan = {};
            }

            update() {
                // Implementation for updating target plan
            }

            saveTargetPlan() {
                // Implementation for saving target plan
            }

            exportTargetPlan() {
                // Implementation for exporting target plan
            }

            loadSampleTargetPlan() {
                // Implementation for loading sample target plan
            }
        }

        // Offers Manager Module
        class OffersManager {
            constructor(app) {
                this.app = app;
            }

            addOffer() {
                // Implementation for adding offers
            }

            updateTable() {
                // Implementation for updating offers table
            }
        }

        // Feedback Manager Module
        class FeedbackManager {
            constructor(app) {
                this.app = app;
            }

            saveFeedback() {
                // Implementation for saving feedback
            }

            updateSummary() {
                // Implementation for updating feedback summary
            }

            updateTable() {
                // Implementation for updating feedback table
            }

            update() {
                // Implementation for updating feedback management page
            }
        }

        // Chart Manager Module
        class ChartManager {
            constructor(app) {
                this.app = app;
                this.charts = new Map();
            }

            // Implementation for chart management
        }

        // Error Handler Module
        class ErrorHandler {
            constructor(app) {
                this.app = app;
            }

            showSuccess(message) {
                const notification = document.createElement('div');
                notification.className = 'alert alert-success notification';
                notification.innerHTML = `
                    <i class="fas fa-check-circle"></i> 
                    <strong>Success:</strong> ${message}
                `;
                
                document.getElementById('notificationContainer').appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }

            showError(message) {
                const notification = document.createElement('div');
                notification.className = 'alert alert-danger notification';
                notification.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i> 
                    <strong>Error:</strong> ${message}
                `;
                
                document.getElementById('notificationContainer').appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 5000);
            }
        }

        // Initialize the application
        let app;
        document.addEventListener('DOMContentLoaded', function() {
            app = new CrispyChickenApp();
        });
    </script>
</body>
</html>
